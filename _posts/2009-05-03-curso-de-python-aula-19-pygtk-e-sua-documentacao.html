---
layout: post
title: Curso de Python - Aula 19 - PyGTK e sua documentação
categories:
- Aulas
- python
tags:
- Aulas
- python
- vakinha
status: publish
type: post
published: true
---
<p style="text-align: justify;">Olá pessoal!</p><br />
<p style="text-align: justify;">Aqui vamos nós para mais uma aula de Python!</p><br />
<p style="text-align: justify;">Hoje veremos um pouco mais sobre os conectores e também vamos aprender a encontrar respostas na documentação do PyGTK.</p><br />
<p style="text-align: justify;">É através dos conectores que nós conseguimos ligar as ações do usuário na interface às funções do programa. Na <a title="PyGTK, o início" href="http://evaldojunior.com.br/blog/?p=541" target="_blank">aula 16</a>, nosso primeiro contato com PyGTK, já existe uma demonstração de um conector ligando o evento "clique" de um botão à função "<strong>ola_mundo</strong>".</p><br />
<p style="text-align: justify;">Primeiro precisamos saber que não existe apenas o sinal <strong>'clicked'</strong>, alguns widgets do PyGTK apresentam outros tipos de sinais, então nossa missão é descobrir que sinais são esses. Mas como faremos isso? Simples, basta ter alguns conhecimentos que você já deve possuir: Leitura e Navegação na Web heheh. <a title="Referência do PyGTK 2.0" href="http://pygtk.org/docs/pygtk/" target="_blank">Na página de referência do PyGTK</a> você encontra a documentação de todos os componentes desta API.</p><br />
<p style="text-align: justify;">Pois bem, vamos fazer o seguinte exemplo: Uma janela com um rótulo e um botão, quando o mouse passar sobre o botão o rótulo deve dizer "O mouse está sobre o botão!" e quando deixa-lo a mensagem muda para "O mouse saiu de cima do botão!". Aqui está um modelo para a janela:</p><br />
<p style="text-align: center;"><a href="http://evaldojunior.com.br/blog/wp-content/uploads/2009/05/aula_19_1.png"><img class="aligncenter size-full wp-image-640" title="aula_19_1" src="http://evaldojunior.com.br/blog/wp-content/uploads/2009/05/aula_19_1.png" alt="aula_19_1" width="217" height="109" /></a></p><br />
<p style="text-align: justify;">Janelinha bonitinha, não? Fiz no <a title="Inkscape" href="http://www.inkscape.org/" target="_blank">Inkscape</a> =)</p><br />
<p style="text-align: justify;">Bem, agora que já temos o modelo precisamos escrever o código para esta janela:</p><br />
<code lang="python"><br />
#!/usr/bin/env python<br />
# -*- coding=utf-8 -*-<br />
import pygtk<br />
import gtk<br />
class CJanela():<br />
    __doc__ = """<br />
        Classe CJanela, desenha uma janela com um label e um botão em uma<br />
        caixa vertical.<br />
    """<br />
    def __init__(self):<br />
        self.janela = gtk.Window(gtk.WINDOW_TOPLEVEL)<br />
        self.janela.set_title("Aula 19, Sinais")<br />
        self.rotulo = gtk.Label()<br />
        self.botao = gtk.Button("Passe o mouse")<br />
        self.caixa = gtk.VBox()<br />
        self.caixa.pack_start(self.rotulo)<br />
        self.caixa.pack_start(self.botao)<br />
        self.janela.add(self.caixa)<br />
        self.janela.show_all()<br />
janela = CJanela()<br />
gtk.main()<br />
</code><br />
<p style="text-align: justify;">Vejam que desta vez estou usando uma metodologia diferente, fiz uma classe <strong>CJanela</strong> que é a responsável por exibir a janela e seu conteúdo. Acredite em mim esta metodologia facilita muito o acesso aos widgets.</p><br />
<p style="text-align: justify;">Ora, ora, já temos a janela com o rótulo e o botão, agora nos resta programar as ações e "mouse sobre" e "mouse sai". Então vamos recorrer à documentação do PyGTK, como vamos usar os sinais do botão então é a <a title="gtk.Button, referência" href="http://pygtk.org/docs/pygtk/class-gtkbutton.html" target="_blank">documentação deste</a> que devemos ver.</p><br />
<p style="text-align: justify;">Vejam na área "<strong>gtk.Button Signal Prototypes</strong>", este widget nos oferece seis sinais: <strong>activate</strong>, <strong>clicked</strong>, <strong>enter</strong>, <strong>leave</strong>, <strong>pressed</strong> e <strong>released</strong>. Para o que queremos fazer os sinais <strong>'enter'</strong> e <strong>'leave'</strong> serão suficientes. Reparem que na referência diz que o sinal <strong>'clicked'</strong> é praticamente o único que uma aplicação precisa, mas não aqui nas aulas do InFog heheh.</p><br />
<p style="text-align: justify;">Então vamos criar as funções <strong>'mouse_sobre'</strong> e <strong>'mouse_saiu'</strong>, elas serão as responsáveis por alterar o texto do rótulo, e usaremos os conectores para ligar os sinais do botão à estas funções, vejam o código:</p><br />
<code lang="python"><br />
#!/usr/bin/env python<br />
# -*- coding=utf-8 -*-<br />
import pygtk<br />
import gtk<br />
class CJanela():<br />
    __doc__ = """<br />
        Classe CJanela, desenha uma janela com um label e um botão em uma<br />
        caixa vertical.<br />
    """<br />
    def __init__(self):<br />
        self.janela = gtk.Window(gtk.WINDOW_TOPLEVEL)<br />
        self.janela.set_title("Aula 19, Sinais")<br />
        self.rotulo = gtk.Label()<br />
        self.botao = gtk.Button("Passe o mouse")<br />
        self.botao.connect('enter', self.mouse_sobre)<br />
        self.botao.connect('leave', self.mouse_saiu)<br />
        self.caixa = gtk.VBox()<br />
        self.caixa.pack_start(self.rotulo)<br />
        self.caixa.pack_start(self.botao)<br />
        self.janela.add(self.caixa)<br />
        self.janela.show_all()<br />
    def mouse_sobre(self, widget):<br />
        self.rotulo.set_text("O mouse está sobre o botão!")<br />
    def mouse_saiu(self, widget):<br />
        self.rotulo.set_text("O mouse saiu de cima do botão!")<br />
janela = CJanela()<br />
gtk.main()<br />
</code><br />
<p style="text-align: justify;">Vejam o resultado:</p><br />
<p style="text-align: center;"><a href="http://evaldojunior.com.br/blog/wp-content/uploads/2009/05/captura_de_tela-aula-19-sinais.png"><img src="http://evaldojunior.com.br/blog/wp-content/uploads/2009/05/captura_de_tela-aula-19-sinais.png" alt="captura_de_tela-aula-19-sinais" title="captura_de_tela-aula-19-sinais" width="259" height="93" class="aligncenter size-full wp-image-645" /></a></p><br />
<p style="text-align: center;"><a href="http://evaldojunior.com.br/blog/wp-content/uploads/2009/05/captura_de_tela-aula-19-sinais-1.png"><img src="http://evaldojunior.com.br/blog/wp-content/uploads/2009/05/captura_de_tela-aula-19-sinais-1.png" alt="captura_de_tela-aula-19-sinais-1" title="captura_de_tela-aula-19-sinais-1" width="259" height="93" class="aligncenter size-full wp-image-646" /></a></p><br />
<p style="text-align: justify;">Bem simples né? O legal do PyGTK é que na maioria das vezes, para aplicações mais simples, a sua preocupação será com o negócio e não com o PyGTK com em sí, já que sua manipulação não é algo tão complexo.</p><br />
<p style="text-align: justify;">E essa foi a nossa aula de hoje, espero que tenham gostado e aprendido bastante.</p><br />
<p style="text-align: justify;">Lição de Casa!</p><br />
<p style="text-align: justify;">Rá! Pensou que ia ficar só nisso né? Agora é a hora de botar a cachola para funcionar! A lição de hoje é simples, quero que vocês façam uma janela com um rótulo e quatro botões: "<strong>maximizar</strong>", "<strong>desfazer maximização</strong>", "<strong>tela cheia</strong>" e "<strong>desfazer tela cheia</strong>". Quando clicados os botões devem fazer as devidas ações e o rótulo deve mostrar o status da janela, exemplo: "<strong>Janela Maximizada</strong>", "<strong>Janela em Tela Cheia</strong>", etc. Boa sorte!</p>
